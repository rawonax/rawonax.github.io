---
title: "[TIL] 애니메이션 최적화: left/top 대신 transform opacity를 쓰는 이유"
categories: [frontend]
date: 2025-08-30 
---

웹 애니메이션을 만들 때 position: absolute; left나 top값을 직접 바꿔서 이동하는 경우가 많은데, 다른 방법을 쓰면 성능 이슈를 줄일 수 있지 않을까? 하는 생각을 하게 되었다. 


## 브라우저 렌더링 파이프라인 복습
브라우저는 화면을 그릴 때 보통 이러한 단계를 거친다. 
1. **Layout**: DOM 요소의 크기와 위치를 계산
2. **Style**: CSS 스타일 계산
3. **Paint**: 픽셀을 채우고 레이어를 그림
4. **Composite**: GPU에서 레이어들을 합성

> 💡 핵심: `left`, `top`, `width`, `height` 같은 속성을 바꾸면 **Layout → Paint → Composite**까지 전부 다시 돌게 됨
> 반면 `transform`과 `opacity`는 **Composite 단계에서만 처리**되어 훨씬 가벼움


### left/top 이동
```css
.mover {
  position: absolute;
  left: 0;
  top: 0;
  transition: left 0.25s ease, top 0.25s ease;
}

.mover.move {
  left: 200px;
  top: 120px;
}
```
이렇게 해버리면 layout 단계가 계속 발생해서 큰 dom일수록 전체 배치 연산에 부담이 간다. paint도 다시 실행되어 fps가 저하되고 저사양 기기에서는 뚝뚝 끊김현상을 볼 수 있다. 


### transform 이동 

```css
.mover {
  position: absolute;
  transform: translate3d(0, 0, 0);
  transition: transform 0.25s ease;
}

.mover.move {
  transform: translate3d(200px, 120px, 0);
} 
```
layout이 paint를 건너뛰고 gpu 함성만 수행한다. 초당 60fps까지 유지 가능성이 높아지고 gpu 가속을 유도하는 translate3d덕에 더욱 부드럽게 된다.


## opacity 애니메이션도 마찬가지이다 
얘도 composite단계에서만 처리된다 


```css
.fade {
  opacity: 0;
  transition: opacity 0.3s ease;
}

.fade.show {
  opacity: 1;
}
```

-> paint가 필요없으므로 페이드 인 / 아웃 애니메이션이 매우 가볍다고 볼 수 있다. 

>실제로 devtools로 확인해보면 performance 패널에서는 left/top 애니메이션 시 layout & paint 가 반복 실행되었다. layers 패널에서는 transform/opacity 애니메이션은 별도 레이어에서 gpu가 처리하고 있는 것을 확인할 수 있었다. 직접 두 방식을 비교해본다면 프레임드랍이 transform 방식에서 눈에 띄게 줄어드는걸 볼 수 있다. 


# 그래서 결론은
- left/top으로 변경하면 layouty-> paint-> composite 과정을 거쳐 무겁게 된다 
- transform/opacity 변경은 composite만 기준으로 둔다 

> ***가능한 한 애니메이션은 transform과 opacity로 구현하자 ***


다음 글에서는 FLIP 패턴을 통해, 레이아웃 변화를 transform 애니메이션으로 치환하는 실전 기법을 다뤄볼 예정임 !!